---
// Componente Header/Navigation - Navegación principal con datos de Sanity
import { sanityFetch } from "../lib/sanity";
import { urlFor } from "../lib/image";

const config = await sanityFetch(`
  *[_type == "configuracion"][0]{
    nombreSitio,
    logo
  }
`);

const nombreSitio = config?.nombreSitio || "Corazones Abrigados";
const logoUrl = config?.logo ? urlFor(config.logo).width(200).url() : null;
---

<nav
  class="sticky top-0 z-50 bg-crudo/95 backdrop-blur-md border-b border-gris/20 transition-all duration-300"
  id="navbar">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex justify-between items-center h-20">
      <!-- Mobile Menu Button -->
      <div class="flex items-center md:hidden">
        <button
          type="button"
          id="mobile-menu-btn"
          class="text-marron hover:text-turquesa transition p-2">
          <i data-lucide="menu" class="w-6 h-6"></i>
        </button>
      </div>

      <!-- Logo -->
      <div
        class="flex-shrink-0 flex items-center justify-center md:justify-start w-full md:w-auto">
        <a href="/" class="flex flex-col items-center md:items-start group">
          {
            logoUrl ? (
              <img src={logoUrl} alt={nombreSitio} class="h-10 w-auto" />
            ) : (
              <span class="font-script text-3xl text-marron group-hover:text-turquesa transition duration-300">
                {nombreSitio}
              </span>
            )
          }
          <span
            class="text-[10px] uppercase tracking-[0.2em] text-gris font-serif mt-[-5px]"
            >Tejidos de la Patagonia</span
          >
        </a>
      </div>

      <!-- Desktop Menu -->
      <div class="hidden md:flex space-x-8 items-center">
        <a href="/" class="text-gray-700 hover:text-turquesa font-serif italic transition">Inicio</a>
        <a
          href="/#historia"
          class="text-gray-700 hover:text-turquesa font-serif italic transition"
          >Nuestra Historia</a
        >
        <a
          href="/catalogo"
          class="text-gray-700 hover:text-turquesa font-serif italic transition"
          >Catálogo</a
        >
        <a
          href="/#impacto"
          class="text-gray-700 hover:text-turquesa font-serif italic transition"
          >Impacto</a
        >
      </div>

      <!-- Icons -->
      <div class="hidden md:flex items-center space-x-5 text-marron">
        <button class="hover:text-turquesa transition"
          ><i data-lucide="search" class="w-5 h-5"></i></button
        >
      </div>

      <!-- Mobile Cart Icon (visible on mobile) -->
    </div>
  </div>

  <!-- Mobile Menu Panel -->
  <div
    id="mobile-menu"
    class="hidden md:hidden bg-crudo border-t border-gray-200 absolute w-full shadow-lg">
    <div class="px-4 pt-4 pb-6 space-y-3 text-center">
      <a
        href="/#historia"
        class="block text-marron font-serif text-lg py-2 hover:bg-lavanda/30 rounded"
        >Nuestra Historia</a
      >
      <a
        href="/catalogo"
        class="block text-marron font-serif text-lg py-2 hover:bg-lavanda/30 rounded"
        >Catálogo</a
      >
      <a
        href="/#impacto"
        class="block text-marron font-serif text-lg py-2 hover:bg-lavanda/30 rounded"
        >Impacto</a
      >
    </div>
  </div>
</nav>
